server:
    # Listen on all interfaces
    interface: 0.0.0.0
    port: 53

    # DNSSEC validation
    auto-trust-anchor-file: "/var/lib/unbound/root.key"
    val-permissive-mode: no
    module-config: "validator iterator"
    harden-dnssec-stripped: yes
    aggressive-nsec: yes

    # Privacy & hardening
    hide-identity: yes
    hide-version: yes
    harden-glue: yes
    harden-referral-path: yes
    harden-large-queries: yes
    harden-algo-downgrade: yes
    qname-minimisation: yes
    qname-minimisation-strict: yes

    # Root hints for direct root queries
    root-hints: "/etc/unbound/root.hints"

    # Networking
    do-ip4: yes
    do-ip6: no          # Disable IPv6 if not needed
    do-udp: yes
    do-tcp: yes

    # Cache settings
    msg-cache-size: 50m
    rrset-cache-size: 100m
    cache-min-ttl: 3600
    cache-max-ttl: 86400

    # Access control (allow LAN only)
    access-control: 192.168.0.0/16 allow
    access-control: 127.0.0.0/8 allow
    access-control: ::1 allow
    access-control: 0.0.0.0/0 refuse

    # Logging
    verbosity: 1
    log-queries: no
    log-replies: no
    use-syslog: no

    # Rate limiting
    ratelimit: 1000

    # Prefetch popular records
    prefetch: yes
    prefetch-key: yes

    # TLS bundle for DNS-over-TLS (if needed later)
    tls-cert-bundle: "/etc/ssl/certs/ca-certificates.crt"

# Forward internal zone to CoreDNS
#forward-zone:
#    name: "corp.local"
#    forward-addr: 192.168.1.10    # CoreDNS authoritative server
